# 🔧 银行政策知识库RAG问答系统 - 故障排除指南

## ❌ 常见错误及解决方案

### 1. 直接运行Python文件报错

**错误信息：**
```
WARNING: to view this Streamlit app on a browser, run it with the following command:
streamlit run streamlit_rag_ui.py [ARGUMENTS]
```

**原因：** 直接运行了Python文件，但Streamlit应用需要用`streamlit run`命令启动。

**解决方案：**
```bash
# ❌ 错误方式
python streamlit_rag_ui.py

# ✅ 正确方式
streamlit run streamlit_rag_ui.py
```

### 2. Streamlit未安装

**错误信息：**
```
ModuleNotFoundError: No module named 'streamlit'
```

**解决方案：**
```bash
# 安装Streamlit
pip install streamlit

# 或者使用我们的自动安装脚本
python run_app.py
```

### 3. 端口被占用

**错误信息：**
```
Port 8501 is already in use
```

**解决方案：**
```bash
# 使用不同端口
streamlit run streamlit_rag_ui.py --server.port 8502

# 或者停止占用端口的进程
netstat -ano | findstr :8501
taskkill /PID <进程ID> /F
```

### 4. 路径错误

**错误信息：**
```
FileNotFoundError: [Errno 2] No such file or directory
```

**解决方案：**
1. 确保在正确的目录运行
2. 检查文件路径是否正确
3. 使用绝对路径

### 5. 依赖缺失

**错误信息：**
```
ModuleNotFoundError: No module named 'xxx'
```

**解决方案：**
```bash
# 安装所有依赖
pip install -r requirements.txt

# 或者手动安装
pip install streamlit pathlib typing logging
```

## 🚀 正确的启动方式

### 方式1：使用批处理文件（Windows推荐）
```bash
# 双击运行
启动RAG系统.bat
```

### 方式2：使用Python脚本
```bash
python run_app.py
```

### 方式3：直接使用Streamlit命令
```bash
streamlit run streamlit_rag_ui.py
```

### 方式4：指定端口和地址
```bash
streamlit run streamlit_rag_ui.py --server.port 8501 --server.address localhost
```

## 🔍 调试步骤

### 1. 检查环境
```bash
# 检查Python版本
python --version

# 检查Streamlit版本
streamlit --version

# 检查依赖
pip list | grep streamlit
```

### 2. 检查文件
```bash
# 检查应用文件是否存在
ls streamlit_rag_ui.py

# 检查依赖文件
ls requirements.txt
```

### 3. 测试RAG系统
```bash
# 测试RAG系统是否正常
python simple_rag_test.py
```

### 4. 查看日志
```bash
# 启动时查看详细日志
streamlit run streamlit_rag_ui.py --logger.level debug
```

## 🛠️ 完整解决方案

### 步骤1：环境检查
```bash
# 1. 检查Python
python --version

# 2. 检查Streamlit
python -c "import streamlit; print(streamlit.__version__)"
```

### 步骤2：安装依赖
```bash
# 安装所有依赖
pip install streamlit pathlib typing logging

# 或者使用requirements.txt
pip install -r requirements.txt
```

### 步骤3：测试RAG系统
```bash
# 测试RAG功能
python simple_rag_test.py
```

### 步骤4：启动应用
```bash
# 启动Streamlit应用
streamlit run streamlit_rag_ui.py
```

## 📞 获取帮助

### 如果问题仍然存在：

1. **检查错误日志**
   - 查看完整的错误信息
   - 记录错误发生的步骤

2. **尝试简化版本**
   ```bash
   streamlit run simple_streamlit_test.py
   ```

3. **检查系统要求**
   - Python 3.7+
   - 足够的内存（推荐4GB+）
   - 网络连接正常

4. **重新安装**
   ```bash
   pip uninstall streamlit
   pip install streamlit
   ```

## ✅ 成功启动的标志

当系统正常启动时，您会看到：

```
You can now view your Streamlit app in your browser.

Local URL: http://localhost:8501
Network URL: http://192.168.1.100:8501
```

然后浏览器会自动打开，显示RAG问答系统的界面。

## 🎯 快速修复命令

如果遇到问题，请按顺序尝试：

```bash
# 1. 安装依赖
pip install streamlit

# 2. 测试RAG系统
python simple_rag_test.py

# 3. 启动应用
streamlit run streamlit_rag_ui.py

# 4. 如果端口冲突，使用其他端口
streamlit run streamlit_rag_ui.py --server.port 8502
```

## 📝 总结

最常见的错误是直接运行Python文件，正确的做法是使用`streamlit run`命令。如果遇到其他问题，请按照上述步骤逐一排查。
