# 银行政策知识库RAG系统

[![Python](https://img.shields.io/badge/Python-3.7+-blue.svg)](https://www.python.org/downloads/)
[![Streamlit](https://img.shields.io/badge/Streamlit-1.28+-red.svg)](https://streamlit.io/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

一个基于RAG技术的银行政策文档智能问答系统，支持长效思考过程和完整推理步骤展示。

## 📋 项目简介

本项目是一个专业的银行政策知识库问答系统，采用先进的RAG（Retrieval-Augmented Generation）技术，结合长效思考机制，为用户提供准确、深入的银行政策咨询服务。系统能够展示完整的思考过程，让用户了解AI的推理步骤，提高答案的可信度和可解释性。

### 核心特性

- **长效思考过程**: 展示完整的AI推理步骤和思考过程
- **多类型问答**: 支持政策咨询、数据分析、比较分析等多种问题类型
- **智能检索**: 基于BM25和TF-IDF的混合搜索算法
- **实时推理**: 动态展示思考进度和推理步骤
- **专业界面**: 简洁专业的用户界面设计

## 🚀 核心功能

### 1. 智能问答系统
- **政策咨询**: 银行政策解读和咨询
- **数据分析**: 金融指标查询和趋势分析
- **比较分析**: 不同时期、不同机构的对比分析
- **风险评估**: 金融风险识别和评估

### 2. 长效思考机制
- **推理步骤展示**: 完整展示AI的思考过程
- **进度可视化**: 实时显示思考进度
- **质量评估**: 推理质量和置信度分析
- **推理链追踪**: 完整的推理链路展示

### 3. 知识库管理
- **文档索引**: 自动构建文档索引
- **语义检索**: 基于语义相似度的智能检索
- **上下文增强**: 为生成模型提供相关上下文
- **答案生成**: 基于检索结果生成专业答案

## 🤖 Agent工作流程详解

### 思考过程流程

```
用户问题 → 问题分析 → 文档检索 → 信息提取 → 逻辑推理 → 答案生成 → 质量验证 → 最终输出
```

### 详细工作步骤

1. **问题理解阶段**
   - 分析问题类型和关键信息需求
   - 识别问题所属领域（政策、数据、比较等）
   - 确定检索策略和推理方向

2. **文档检索阶段**
   - 基于关键词和语义相似度检索相关文档
   - 使用混合搜索算法（BM25 + TF-IDF）
   - 返回最相关的文档片段

3. **信息提取阶段**
   - 从检索结果中提取关键信息
   - 识别重要数据和政策要点
   - 构建信息关联关系

4. **逻辑推理阶段**
   - 基于提取的信息进行逻辑分析
   - 应用专业知识进行推理
   - 生成初步答案和结论

5. **答案生成阶段**
   - 整合推理结果生成结构化答案
   - 添加数据支撑和政策依据
   - 确保答案的专业性和准确性

6. **质量验证阶段**
   - 验证答案的准确性和完整性
   - 检查逻辑一致性和数据可靠性
   - 评估答案的可信度

## 🎯 系统演示

### 启动系统

```bash
# 克隆项目
git clone <repository-url>
cd bank-policy-rag-system

# 安装依赖
pip install -r requirements.txt

# 启动系统
python 启动RAG.py
```

### 使用示例

1. **政策咨询问题**
   - 问题：普惠金融的发展现状如何？
   - 系统会展示完整的思考过程
   - 提供基于政策文档的专业分析

2. **数据分析问题**
   - 问题：普惠小微贷款的余额是多少？
   - 系统会检索相关数据
   - 提供准确的数值和趋势分析

3. **比较分析问题**
   - 问题：比较不同时期的普惠金融发展情况
   - 系统会进行多维度对比
   - 提供结构化的比较结果

## 🏗️ 系统架构

### 整体架构图

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   用户界面层     │    │   业务逻辑层     │    │   数据存储层     │
│                │    │                │    │                │
│  Streamlit UI  │◄──►│  RAG Pipeline  │◄──►│  知识库文档     │
│  长效思考展示   │    │  推理引擎       │    │  索引文件       │
│  进度可视化     │    │  检索系统       │    │  配置文件       │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

### 核心组件

1. **用户界面层**
   - Streamlit Web界面
   - 实时进度展示
   - 推理过程可视化

2. **业务逻辑层**
   - RAG处理管道
   - 长效思考引擎
   - 推理步骤管理

3. **数据存储层**
   - 知识库文档
   - 索引文件
   - 配置文件

## 🛠️ 技术栈

### 核心技术
- **Python 3.7+**: 主要开发语言
- **Streamlit**: Web界面框架
- **BM25**: 文本检索算法
- **TF-IDF**: 词频-逆文档频率算法
- **jieba**: 中文分词工具

### 依赖包
```
streamlit>=1.28.0
numpy>=1.21.0
pandas>=1.3.0
scikit-learn>=1.0.0
jieba>=0.42.1
```

## ⚙️ 配置说明

### 环境配置

1. **Python环境**
   ```bash
   python --version  # 确保Python 3.7+
   ```

2. **依赖安装**
   ```bash
   pip install -r requirements.txt
   ```

3. **知识库配置**
   - 将政策文档放置在 `knowledge_base/` 目录
   - 确保文档格式为PDF或TXT
   - 运行索引构建脚本

### 系统配置

1. **端口配置**
   - 默认端口：8501
   - 可在启动脚本中修改

2. **知识库路径**
   - 默认路径：当前目录
   - 可在配置文件中修改

## 📖 使用指南

### 快速开始

1. **启动系统**
   ```bash
   python 启动RAG.py
   ```

2. **访问界面**
   - 打开浏览器访问：http://localhost:8501
   - 系统会自动打开浏览器

3. **开始使用**
   - 在输入框中输入问题
   - 点击"开始深度思考"按钮
   - 观察完整的思考过程

### 问题类型指南

1. **政策咨询类**
   - 格式：XXX的发展现状如何？
   - 示例：普惠金融的发展现状如何？

2. **数据分析类**
   - 格式：XXX的数值是多少？
   - 示例：普惠小微贷款的余额是多少？

3. **比较分析类**
   - 格式：比较XXX和XXX的差异
   - 示例：比较不同时期的普惠金融发展情况

### 高级功能

1. **推理过程查看**
   - 系统会展示每个推理步骤
   - 可以查看详细的思考过程
   - 了解AI的决策逻辑

2. **质量评估**
   - 查看推理质量分数
   - 了解置信度评估
   - 分析参考文档来源

## 📁 项目结构

```
bank-policy-rag-system/
├── README.md                 # 项目说明文档
├── requirements.txt          # 依赖包列表
├── 启动RAG.py               # 系统启动脚本
├── 长效思考RAG.py           # 主要应用文件
├── docs/                     # 文档目录
│   ├── 系统架构.md
│   ├── API文档.md
│   └── 部署指南.md
├── images/                   # 图片资源
├── static/                   # 静态文件
├── templates/                # 模板文件
├── knowledge_base/           # 知识库目录
│   ├── documents/           # 政策文档
│   ├── index/               # 索引文件
│   └── config/              # 配置文件
└── backup/                   # 备份文件
```

## 🤝 贡献指南

1. Fork 本项目
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 打开 Pull Request

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

## 📞 联系方式

- 项目链接：[https://github.com/your-username/bank-policy-rag-system](https://github.com/your-username/bank-policy-rag-system)
- 问题反馈：[Issues](https://github.com/your-username/bank-policy-rag-system/issues)

## 🙏 致谢

感谢所有为这个项目做出贡献的开发者和用户。

---

**注意**: 这是一个演示项目，用于展示RAG技术和长效思考机制在银行政策问答中的应用。在生产环境中使用前，请确保进行充分的测试和验证。